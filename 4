SHOW COLUMNS FROM cqeexecution.jenkins_execution LIKE '%ENDPOINT%';

SHOW COLUMNS FROM cqeexecution.teststeps LIKE '%ENDPOINT%';

SELECT 
  ts.ENDPOINT_BACKEND,
  GROUP_CONCAT(DISTINCT ts.APP_NAME ORDER BY ts.APP_NAME SEPARATOR ', ') AS APP_NAMES,
  CASE 
    WHEN SUM(ts.STATUS = 'PASS') = COUNT(*) THEN 'UP'
    ELSE 'DOWN'
  END AS STATUS_INDICATOR
FROM cqeexecution.teststeps ts
JOIN cqeexecution.jenkins_execution je
  ON ts.ENDPOINT_BACKEND = je.ENDPOINT_BACKEND
WHERE je.JOB_ENVIRONMENT = 'sit'
GROUP BY ts.ENDPOINT_BACKEND
ORDER BY ts.ENDPOINT_BACKEND;
